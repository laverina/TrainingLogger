# Бот для ведения дневника тренировок

## Запись

### Как пользователь, я хочу записывать тренировки
...для этого перед описанием тренировки нужно дать команду "запиши ГГГГ-ДД-ММ", и далее перечень упражнений с деталями.

Пример:
```
запиши 2021-11-01     <- отсюда возьмется команда и дата тренировки
Приседания            <- первая строка в блоке - название упражнения
4 по 8                <- если есть строка вида "числа + " по " + числа", из нее возьмется число сетов и повторений
35-40 кг              <- все дальнейшие строки без префикса "--" трактуются как детали в свободной форме, будут сохранены через ";"
--40                  <- строка с -- и числовыми данными трактуется как вес в кг
--cкорее всего с плохой техникой, наверное нужно было поменьше <- дальнейшие строки с "--" трактуются как детали выполненния в свободной форме, будут сохранены через ";"
                      <- пустая строка означает что начинается новый блок с новым упражнением
Жим штанги лежа       <- название
5 по 15-20            <- детали в свободной форме, а сеты и повторения для этого упражнения не указаны
узкая постановка рук, локти прижаты к корпусу <- еще детали в свободной форме
--с грифом            <- детали выполнения в свободной форме, а все для того упражнения не указан
```

Бот выведет описание тренировки в своем формате:
```
Тренировка состоит из упражнений:

1. приседания
- 4 по 8
- 35-40 кг
— 40 кг
— cкорее всего с плохой техникой, наверное нужно было поменьше

2. жим штанги лежа
- 5 по 15-20; узкая постановка рук, локти прижаты к корпусу
— с грифом

Тренировка записана на дату 2021-11-01.
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |  exercise_name  | sets | reps |      details       | execution_weight | execution_details    |  
| 241190476 | 2021-11-01 |            1 |      приседания |    4 |    8 |           35-40 кг |               40 | cкорее всего с пл... |
| 241190476 | 2021-11-01 |            2 | жим штанги лежа |    0 |    0 | 5 по 15-20; узк... |                0 | с грифом             |
```

### Я хочу чтобы тренировка состояла из упражнений
Каждый из блоков, отделенных пустой строкой, воспринимается как отдельное упражнение:

Пример:
```
запиши 2021-11-02
Приседания
 
Становая тяга сумо 

Жим штанги лежа
``` 

Бот поймет как описание тренировки из трех упражнений:
```
Тренировка состоит из упражнений:

1. приседания

2. становая тяга сумо

3. жим штанги лежа

Тренировка записана на дату 2021-11-02 .
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |     exercise_name  | sets | reps | details | execution_weight | execution_details |  
| 241190476 | 2021-11-02 |            1 |         приседания |    0 |    0 |         |                0 |                   |
| 241190476 | 2021-11-02 |            2 | становая тяга сумо |    0 |    0 |         |                0 |                   |
| 241190476 | 2021-11-02 |            3 |    жим штанги лежа |    0 |    0 |         |                0 |                   |
```


### Иногда я хочу задавать описание числа подходов и повторов в числовом виде
Если после названия упражнения, в том же блоке встречается строка вида X по Y, X воспринимается как число подходов, Y - как число повторов.

Пример:
```
запиши 2021-11-03
Приседания
5 по 5
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания
- 5 по 5

Тренировка записана на дату 2021-11-03 .
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |     exercise_name  | sets | reps | details | execution_weight | execution_details |  
| 241190476 | 2021-11-03 |            1 |         приседания |    5 |    5 |         |                0 |                   |
```

### Иногда я хочу давать дополнительные детали по упражнению
Все дополнительные детали, кроме числа подходов и повторов, тоже записываются.

Строки конкатенируются через точку с запятой.

Пример:
```
запиши 2021-11-04
Приседания
5 по 4
до параллели
колени над носками 
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания
- 5 по 4
- до параллели; колени над носками

Тренировка записана на дату 2021-11-04 .
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |     exercise_name  | sets | reps | details                         | execution_weight | execution_details |  
| 241190476 | 2021-11-04 |            1 |         приседания |    5 |    4 | до параллели; колени над носками|                0 |                   |
```


### Иногда я хочу давать сведения о весе в КГ, использованном в подходе, целым числом
Детали выполнения упражнения задаются с префиксом --.

Первая строка содержащая число будет трактоваться как вес в кг. 

Пример:
```
запиши 2021-11-05
Приседания
5 по 3
--50
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания
- 5 по 3
— 50 кг

Тренировка записана на дату 2021-11-05 .
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |     exercise_name  | sets | reps | details | execution_weight | execution_details |  
| 241190476 | 2021-11-05 |            1 |         приседания |    5 |    3 |         |               50 |                   | 
```


### Иногда я хочу давать дополнительные детали по выполнению

Все строки с префиксом "--", кроме строки с весом, тоже будут сохранены, сконкатенированными через точку с запятой.

Пример:
```
запиши 2021-11-06
Приседания
5 по 2
--52
--последний повтор с таким весом давался тяжело
--еще подробности
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания
- 5 по 2
— 52 кг
— последний повтор с таким весом давался тяжело; еще подробности

Тренировка записана на дату 2021-11-06 .
```

И сохранит ее в БД:
```
|  user_id  |    date    | exercise_num |     exercise_name  | sets | reps | details | execution_weight |                        execution_details                       |  
| 241190476 | 2021-11-06 |            1 |         приседания |    5 |    2 |         |               52 | последний повтор с таким весом давался тяжело; еще подробности |
```


### До записи я хочу знать, как бот понял мое описание тренировки
...для этого перед описанием тренировки нужно дать команду "распарси".

Напимер:
```
распарси
Приседания
5 по 2
--52
--последний повтор с таким весом давался тяжело

Жим штанги лежа
5 по 5-6
--25
```

Бот ответит форматированным описанием тренировки:
```
Тренировка состоит из упражнений:

1. приседания
- 5 по 2
— 52 кг
— последний повтор с таким весом давался тяжело

2. жим штанги лежа
- 5 по 5-6
— 25 кг
```

В отличии откоманды "сохрани", записи в БД не произойдет.

## Чтение 

### Как пользователь, я хочу видеть подсказку по тренировке - как эти упражнения выполнялись раньше
...для этого перед описанием тренировки нужно дать команду "покажи", и далее перечень упражнений.

Бот поймет первую строку в каждом блоке - как название упражнения.

Остальную информацию в блоке он проигнорирует.

На каждое упражнение бот выдаст данные о трех последних выполнениях.

Пример:
```
покажи
приседания

жим штанги лежа 
```

Бот ответит:
```
Последние записи об упражнениях:

приседания
2021-11-06
- 5 по 2
—52 кг [последний повтор с таким весом давался тяжело; еще подробности]
2021-11-05
- 5 по 3
—50 кг
2021-11-04
- 5 по 4 [до параллели; колени над носками]

жим штанги лежа
2021-11-06
- 4 по 8
—22 кг
2021-11-02
- 2 по 3
—27 кг [30 на 1 уже не получилось]
2021-11-02
- 2 по 3
—25 кг
```

