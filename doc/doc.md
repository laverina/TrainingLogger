# Бот для ведения дневника тренировок

## Запись

### Как пользователь, я хочу записывать тренировки
...для этого перед описанием тренировки нужно дать команду "запиши ГГГГ-ДД-ММ", и далее перечень упражнений с деталями.

Пример:
```
запиши 2021-11-11     <- отсюда возьмется команда и дата тренировки
Приседания со штангой <- первая строка в блоке - название упражнения
4 по 8                <- если есть строка вида "числа + " по " + числа", из нее возьмется число сетов и повторений
35-40 кг              <- все дальнейшие строки без префикса "--" трактуются как детали в свободной форме, будут сохранены через ";"
--40                  <- строка с -- и числовыми данными трактуется как вес в кг
--cкорее всего с плохой техникой, наверное нужно было поменьше <- дальнейшие строки с "--" трактуются как детали выполненния в свободной форме, будут сохранены через ";"
                      <- пустая строка означает что начинается новый блок с новым упражнением
Выпады (ходьба)       <- название
16 (8+8) 3 подхода    <- детали в свободной форме, а сеты и повторения для этого упражнения не указаны
Носок передней ноги внутрь смотрит <- еще детали в свободной форме
--с 2мя гантелями по 10 кг         <- детали выполнения в свободной форме, а все для того упражнения не указан
```

Бот выведет описание тренировки в своем формате, и сохранит ее в БД:
```
Тренировка состоит из упражнений:
1. приседания со штангой
4 по 8
- 35-40 кг
-- 40 кг
-- cкорее всего с плохой техникой, наверное нужно было поменьше

2. выпады (ходьба)
- 16 (8+8) 3 подхода; носок передней ноги внутрь смотрит
-- с 2мя гантелями по 10 кг

Тренировка записана на дату 2021-11-11
```

### Я хочу чтобы тренировка состояла из упражнений
Каждый из блоков, отделенных пустой строкой, воспринимается как отдельное упражнение:

Пример:
```
запиши 2021-11-11
Приседания со штангой
 
Становая тяга сумо 

Жим штанги лежа
``` 

Бот поймет как описание тренировки из трех упражнений:
```
Тренировка состоит из упражнений:

1. приседания со штангой

2. становая тяга сумо

3. жим штанги лежа
...
```

### Иногда я хочу задавать описание числа подходов и повторов в числовом виде
Если после названия упражнения, в том же блоке встречается строка вида X по Y, X воспринимается как число подходов, Y - как число повторов.

Пример:
```
запиши 2021-11-11
Приседания со штангой
4 по 8 
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания со штангой
- 4 по 8
```

### Иногда я хочу давать дополнительные детали по упражнению
Все дополнительные детали, кроме числа подходов и повторов, тоже записываются.

Строки конкатенируются через точку с запятой.

Пример:
```
запиши 2021-11-11
Приседания со штангой
4 по 8 
до параллели
колени над носками 
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания со штангой
- 4 по 8
- до параллели; колени над носками
```

### Иногда я хочу давать сведения о весе в КГ, использованном в подходе, целым числом
Детали выполнения упражнения задаются с префиксом --.

Первая строка содержащая число будет трактоваться как вес в кг. 

Пример:
```
запиши 2021-11-11
Приседания со штангой
4 по 8  
--40
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания со штангой
- 4 по 8
— 40 кг

Тренировка записана на дату 2021-11-11 .
```
### Иногда я хочу давать дополнительные детали по выполнению

Все строки с префиксом "--", кроме строки с весом, тоже будут сохранены, сконкатенированными через точку с запятой.

Пример:
```
запиши 2021-11-11
Приседания со штангой
4 по 8  
--40
--последний повтор с таким весом даваля тяжело
--еще подробности
```

Бот поймет так:
```
Тренировка состоит из упражнений:

1. приседания со штангой
- 4 по 8
— 40 кг
— последний повтор с таким весом даваля тяжело; еще подробности

Тренировка записана на дату 2021-11-11.
```

### До записи я хочу знать, как бот понял мое описание тренировки
...для этого перед описанием тренировки нужно дать команду "распарси".
Напимер:
```
распарси
Приседания со штангой
4 по 8
35-40 кг
--40
--cкорее всего с плохой техникой, наверное нужно было поменьше

Выпады (ходьба)
16 (8+8) 3 подхода
Носок передней ноги внутрь смотрит
--с 2мя гантелями по 10 кг
```

Бот ответит форматированным описанием тренировки:
```
Тренировка состоит из упражнений:

1. приседания со штангой
- 4 по 8
- 35-40 кг
— 40 кг
— cкорее всего с плохой техникой, наверное нужно было поменьше

2. выпады (ходьба)
- 16 (8+8) 3 подхода; носок передней ноги внутрь смотрит
— с 2мя гантелями по 10 кг
```

В отличии откоманды "сохрани", записи в БД не произойдет.

## Чтение 

### Как пользователь, я хочу видеть подсказку по тренировке - как эти упражнения выполнялись раньше
...для этого перед описанием тренировки нужно дать команду "покажи", и далее перечень упражнений.

Бот поймет первую строку в каждом блоке - как название упражнения.

Остальную информацию в блоке он проигнорирует.

На каждое упражнение бот выдаст данные о трех последних выполнениях.

Пример:
```
покажи
приседания со штангой

жим штанги лежа 
```

Бот ответит:
```
Последние записи об упражнениях:

приседания со штангой
2021-11-11
- 4 по 8 [35-40 кг]
—40 кг [cкорее всего с плохой техникой, наверное нужно было поменьше]
2021-11-11
- 4 по 8
2021-11-11

жим штанги лежа
2021-11-11
- 4 по 5
2021-11-11
```

